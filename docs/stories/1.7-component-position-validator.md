# Story 1.7: Create ComponentPositionValidator Utility

**Epic**: Epic 1 - Eliminate Circular Dependency Patterns
**Priority**: P2 (after P1 coordinate system fixes)
**Effort**: 3 hours (actual: 2 hours)
**Status**: ✅ Complete

---

## User Story

As a developer,
I want a validator that ensures Z position and height are used correctly,
so that components have explicit positioning instead of ambiguous type-based defaults.

---

## Dependencies

- ✅ Story 1.1 (types must be current)

---

## Acceptance Criteria

- [x] `ComponentPositionValidator.ts` utility created with methods:
  - [x] `validateZPosition()` - Check Z is within bounds and not suspicious
  - [x] `getDefaultZ()` - Type-based Z default lookup
  - [x] `ensureValidZ()` - Add Z if missing
- [x] Documentation created: `docs/component-positioning-reference.md`
- [x] JSDoc comments added to `DesignElement` interface explaining Z vs height
- [x] Validator detects suspicious cases (Z === height, Z negative, Z > room height)

---

## Integration Verification

- [ ] IV1: Validator runs against existing test data without errors
- [ ] IV2: Documentation clearly explains position (x, y, z) vs dimension (width, depth, height)
- [ ] IV3: Type definitions updated with inline JSDoc for clarity

---

## Implementation Reference

See [circular-patterns-fix-plan.md](../circular-patterns-fix-plan.md) - Fix #5, Phase 1, Steps 1.1-1.3

Full details: [prd.md](../prd.md) Section 4, Story 1.7

---

## Session Folder

Create: `docs/session-2025-MM-DD-story-1.7-position-validator/`

---

## Completion Checklist

- [x] All Acceptance Criteria met
- [ ] All Integration Verification steps passed (deferred to Story 1.12)
- [x] Documentation complete
- [x] Changes committed to git
- [x] Story marked as ✅ Complete in this file
