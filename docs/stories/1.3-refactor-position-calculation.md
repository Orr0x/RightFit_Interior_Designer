# Story 1.3: Refactor PositionCalculation.ts to Use CoordinateTransformEngine

**Epic**: Epic 1 - Eliminate Circular Dependency Patterns
**Priority**: P1
**Effort**: 2 hours (actual)
**Status**: ✅ Complete

---

## User Story

As a developer,
I want PositionCalculation.ts to delegate to CoordinateTransformEngine,
so that elevation view positioning uses unified logic instead of legacy asymmetric calculations.

---

## Dependencies

- ✅ Story 1.2 (engine must exist)

---

## Acceptance Criteria

- [x] Legacy asymmetric code (lines 145-197) deleted from PositionCalculation.ts
- [x] `calculateElementPosition()` refactored to use `CoordinateTransformEngine.planToElevation()`
- [x] Feature flag `use_new_positioning_system` removed (new system always used)
- [x] All elevation views (front, back, left, right) use same base calculation
- [x] Left wall mirroring applied at render time, not coordinate calculation time

---

## Integration Verification

- [ ] IV1: Component at Y=100 appears at same relative position on both left and right walls (deferred to Story 1.5)
- [ ] IV2: Existing projects render identically in all elevation views (deferred to Story 1.5)
- [ ] IV3: Manual test matrix passes: 5 test cases × 4 elevation views = 20 tests (deferred to Story 1.5)

---

## Implementation Reference

See [circular-patterns-fix-plan.md](../circular-patterns-fix-plan.md) - Fix #1, Phase 2, Step 2.2

Full details: [prd.md](../prd.md) Section 4, Story 1.3

---

## Session Folder

Create: `docs/session-2025-MM-DD-story-1.3-position-calculation/`

---

## Completion Checklist

- [x] All Acceptance Criteria met
- [ ] All Integration Verification steps passed (deferred to Story 1.5)
- [ ] Visual regression tests passed (deferred to Story 1.5)
- [x] Changes committed to git
- [x] Story marked as ✅ Complete in this file
