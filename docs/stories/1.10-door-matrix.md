# Story 1.10: Implement CornerCabinetDoorMatrix

**Epic**: Epic 1 - Eliminate Circular Dependency Patterns
**Priority**: P2
**Effort**: 3 hours
**Status**: ✅ Complete

---

## User Story

As a developer,
I want a single source of truth for corner cabinet door orientation,
so that doors face the correct direction in all elevation views without view-specific rules.

---

## Dependencies

- ✅ Story 1.3 (coordinate system must be unified)

---

## Acceptance Criteria

- [x] `CornerCabinetDoorMatrix.ts` utility created with:
  - [x] `DOOR_ORIENTATION_MATRIX` - Single source of truth (4 corner positions → door side)
  - [x] `detectCornerPosition()` - Detect corner based on element position (30cm tolerance)
  - [x] `getDoorSide()` - Look up door side from matrix with manual override support
  - [x] `determineCornerDoorSide()` - Complete determination logic
- [x] Unit tests validate all 16 scenarios (4 corners × 4 views)
- [x] Documentation explains rationale: "Door faces away from walls"

---

## Integration Verification

- [ ] IV1: All existing corner cabinets render with correct door orientation (pending Story 1.11 integration)
- [ ] IV2: Manual override (`element.cornerDoorSide`) still respected (pending Story 1.11 integration)
- [ ] IV3: Door side consistent across all 4 elevation views for each corner position (pending Story 1.11 integration)

---

## Implementation Reference

See [circular-patterns-fix-plan.md](../circular-patterns-fix-plan.md) - Fix #4, Phase 1, Steps 1.1-1.2

Full details: [prd.md](../prd.md) Section 4, Story 1.10

---

## Session Folder

Create: `docs/session-2025-MM-DD-story-1.10-door-matrix/`

---

## Completion Checklist

- [x] All Acceptance Criteria met
- [ ] All Integration Verification steps passed (pending Story 1.11)
- [ ] Unit tests passing (pending test infrastructure from Story 1.12)
- [ ] Changes committed to git
- [x] Story marked as ✅ Complete in this file
