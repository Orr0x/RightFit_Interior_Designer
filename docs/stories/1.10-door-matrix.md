# Story 1.10: Implement CornerCabinetDoorMatrix

**Epic**: Epic 1 - Eliminate Circular Dependency Patterns
**Priority**: P2
**Effort**: 3 hours
**Status**: ✅ Complete

---

## User Story

As a developer,
I want a single source of truth for corner cabinet door orientation,
so that doors face the correct direction in all elevation views without view-specific rules.

---

## Dependencies

- ✅ Story 1.3 (coordinate system must be unified)

---

## Acceptance Criteria

- [x] `CornerCabinetDoorMatrix.ts` utility created with:
  - [x] `DOOR_ORIENTATION_MATRIX` - Single source of truth (4 corner positions → door side)
  - [x] `detectCornerPosition()` - Detect corner based on element position (30cm tolerance)
  - [x] `getDoorSide()` - Look up door side from matrix with manual override support
  - [x] `determineCornerDoorSide()` - Complete determination logic
- [x] Unit tests validate all 16 scenarios (4 corners × 4 views)
- [x] Documentation explains rationale: "Door faces away from walls"

---

## Integration Verification

- [x] IV1: All existing corner cabinets render with correct door orientation (Story 1.11 complete)
- [x] IV2: Manual override (`element.cornerDoorSide`) still respected (Story 1.11 complete)
- [x] IV3: Door side consistent across all 4 elevation views for each corner position (Story 1.11 complete)

---

## Implementation Reference

See [circular-patterns-fix-plan.md](../circular-patterns-fix-plan.md) - Fix #4, Phase 1, Steps 1.1-1.2

Full details: [prd.md](../prd.md) Section 4, Story 1.10

---

## Session Folder

Created: [docs/stories/sessions/1.9-1.10-1.11-combined/](./sessions/1.9-1.10-1.11-combined/)

**Session Summary**: [SESSION-SUMMARY.md](./sessions/1.9-1.10-1.11-combined/SESSION-SUMMARY.md)

**Note:** Stories 1.9, 1.10, and 1.11 were implemented together in a single session (Oct 27, 2025).

---

## Completion Checklist

- [x] All Acceptance Criteria met ✅
- [x] All Integration Verification steps passed ✅ (Story 1.11 complete)
- [x] Unit tests passing ✅ (46 tests in CornerCabinetDoorMatrix.test.ts, 100% coverage)
- [x] Changes committed to git ✅ (commit f614ba8)
- [x] Story marked as ✅ Complete in this file ✅
